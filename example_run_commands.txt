python src/tasks/rank.py data/captionme_data/pics_pairs_1.train_json data/captionme_data/pics_pairs_1.val_json data/captionme_data/pics_pairs_1.test_json data/captionme_data/pics_images_features.tsv --loadLXMERT snap/pretrained/model_LXRT.pth rank_output --model_type full --lr .00001 --epochs 5 --multiGPU

python src/tasks/rank.py data/captionme_data/captionme_captions_1.train_json data/captionme_data/captionme_captions_1.val_json data/captionme_data/captionme_captions_1.test_json data/captionme_data/captionme_image_features.tsv --loadLXMERT snap/pretrained/model_LXRT.pth rank_output --model_type full --lr .00001 --epochs 5 --multiGPU

for idx in {0..9}; do CUDA_VISIBLE_DEVICES=0 python src/tasks/classifier.py /share/drive/jack/decouple-content/data/tweets/twitter_split$idx\.json.lxmert_train_json /share/drive/jack/decouple-content/data/tweets/twitter_split$idx\.json.lxmert_val_json /share/drive/jack/decouple-content/data/tweets/twitter_split$idx\.json.lxmert_test_json data/twitter_data/valid_obj36.tsv twitter_concat_$idx --ans2label data/twitter_data/ans2label.json --loadLXMERT snap/pretrained/model_LXRT.pth --model_type concat --lr .00001 --epochs 5; done;

python src/tasks/classifier.py ../decouple-content/data/mdid_split_0_contextual.json.lxmert_train_json ../decouple-content/data/mdid_split_0_contextual.json.lxmert_val_json ../decouple-content/data/mdid_split_0_contextual.json.lxmert_test_json ../decouple-content/data/intent/train_obj36.tsv test_mdid --ans2label ../decouple-content/data/trainval_ans2label.json --loadLXMERT snap/pretrained/model_LXRT.pth




CUDA_VISIBLE_DEVICES=0 python src/tasks/rank.py /share/drive/jack/decouple-content/data/popularity/pics_split_0.json.lxmert_train_json /share/drive/jack/decouple-content/data/popularity/pics_split_0.json.lxmert_val_json /share/drive/jack/decouple-content/data/popularity/pics_split_0.json.lxmert_test_json /share/drive/jack/decouple-content/data/popularity/pics_bbox_features.tsv --loadLXMERT snap/pretrained/model_LXRT.pth rank_output --model_type full



full twitter run:

for model in {full,concat}; do for idx in {0..9}; do for lr in {.000001,.000005,.00001,.00005,.0001}; do CUDA_VISIBLE_DEVICES=1 python src/tasks/classifier.py /share/drive/jack/decouple-content/data/tweets/twitter_split$idx\.json.lxmert_train_json /share/drive/jack/decouple-content/data/tweets/twitter_split$idx\.json.lxmert_val_json /share/drive/jack/decouple-content/data/tweets/twitter_split$idx\.json.lxmert_test_json data/twitter_data/valid_obj36.tsv twitter_$model\_$idx --ans2label data/twitter_data/ans2label.json --loadLXMERT snap/pretrained/model_LXRT.pth --model_type $model --lr $lr --epochs 10 --optimize_metric weighted_average_f1; done; done; done; for model in {full,concat}; do for idx in {0..9}; do for lr in {.000001,.000005,.00001,.00005,.0001}; do CUDA_VISIBLE_DEVICES=1 python src/tasks/classifier.py /share/drive/jack/decouple-content/data/tweets/twitter_split$idx\.json.lxmert_train_json /share/drive/jack/decouple-content/data/tweets/twitter_split$idx\.json.lxmert_val_json /share/drive/jack/decouple-content/data/tweets/twitter_split$idx\.json.lxmert_test_json data/twitter_data/valid_obj36.tsv twitter_$model\logit_$idx --ans2label data/twitter_data/ans2label.json --loadLXMERT snap/pretrained/model_LXRT.pth --model_type full --lr $lr --epochs 10 --optimize_metric weighted_average_f1 --use_logits 1; done; done; done;

full mdid intent run:

for model in {full,concat}; do for idx in {1..5}; do for lr in {.000001,.000005,.00001,.00005,.0001}; do CUDA_VISIBLE_DEVICES=1 python src/tasks/classifier.py /share/drive/jack/decouple-content/data/intent/mdid_split_$idx\_intent.json.lxmert_train_json /share/drive/jack/decouple-content/data/intent/mdid_split_$idx\_intent.json.lxmert_val_json /share/drive/jack/decouple-content/data/intent/mdid_split_$idx\_intent.json.lxmert_test_json /share/drive/jack/decouple-content/data/intent/train_obj36.tsv mdid_$model\logit_$idx --ans2label /share/drive/jack/decouple-content/data/intent/intent_ans2label.json --loadLXMERT snap/pretrained/model_LXRT.pth --model_type $model --lr $lr --epochs 10 --optimize_metric macro_auc --use_logits 1; done; rm mdid_$model\logit_$idx\/*.pth; done; done; for model in {full,concat}; do for idx in {1..5}; do for lr in {.000001,.000005,.00001,.00005,.0001}; do CUDA_VISIBLE_DEVICES=1 python src/tasks/classifier.py /share/drive/jack/decouple-content/data/intent/mdid_split_$idx\_intent.json.lxmert_train_json /share/drive/jack/decouple-content/data/intent/mdid_split_$idx\_intent.json.lxmert_val_json /share/drive/jack/decouple-content/data/intent/mdid_split_$idx\_intent.json.lxmert_test_json /share/drive/jack/decouple-content/data/intent/train_obj36.tsv mdid_$model\_$idx --ans2label /share/drive/jack/decouple-content/data/intent/intent_ans2label.json --loadLXMERT snap/pretrained/model_LXRT.pth --model_type $model --lr $lr --epochs 10 --optimize_metric macro_auc; done; rm mdid_$model\_$idx\/*.pth; done; done;

